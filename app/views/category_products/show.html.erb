<div class="row">
  <div class="col-sm-6">
    <%= image_tag Faker::Placeholdit.image("640x480", "png", 'e6e6e6'), class: 'pull-left img-responsive' %>
  </div>
  <div class="col-sm-6">
    <h1><%= @product.name %></h1>
    <p>Category: <%= link_to @product.category.name, category_path(@product.category) %></p>
    <div class='product-description'><%= @product.description %></div>
    <div class='product-price'><%= number_to_currency @product.price %></div>
    <div class="product-content"><%= simple_format(@product.content) %></div>
    <div>
      <%= link_to '加到購物車', add_category_product_path(@product.category, @product), method: :post, class: 'btn btn-primary' %>
    </div>
  </div>
</div>


<div class="row">
  <div class="col-sm-6">
    <% if user_signed_in? %>
      <h2>發表評論</h2>
      <%= form_for(Comment.new, url: category_product_comments_path(@product.category, @product)) do |f| %>
        <div class="form-group">
          <%= f.label :name %>
          <%= f.text_field :name, class: 'form-control' %>
        </div>
        <div class="form-group">
          <%= f.label :content %>
          <%= f.text_area :content, class: 'form-control', rows: 5 %>
        </div>

        <%= f.submit nil, class: 'btn btn-default' %>
      <% end %>
    <% end %>
  </div>
  <div class="col-sm-6">
    <h2>相關評論</h2>
    <% if @product.comments.empty? %>
      <div class='alert alert-info'>目前沒有評論</div>
    <% end %>
    <% @product.comments.each do |comment| %>
      <div class='comment'>
        <h5><%= comment.name %></h5>
        <p><%= comment.user.email %></p>
        <%= simple_format comment.content %>
        <p>Posted at <%= comment.created_at %></p>
      </div>
    <% end %>
  </div>
</div>